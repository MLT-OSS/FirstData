---
name: datasource-fetcher
description: Extract datasource information from websites and generate validated JSON files (steps 1-6 only). Designed for isolated execution in temporary directories - focuses purely on data acquisition and validation without touching documentation or Git. Uses direct overwrite mode (no merging with existing files) and outputs standardized JSON reports. Use for batch processing where each datasource runs in isolation, or for standalone data fetching.
---

# æ•°æ®æºè·å–å™¨ (Datasource Fetcher)

çº¯ç²¹çš„æ•°æ®æºè·å–å’ŒéªŒè¯å·¥å…·ï¼Œä¸“æ³¨äºæ•°æ®è´¨é‡ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… åªè´Ÿè´£æ•°æ®è·å–ï¼ˆæ­¥éª¤1-6ï¼‰
- âœ… ä¸æ¶‰åŠæ–‡æ¡£æ›´æ–°
- âœ… ä¸æ¶‰åŠGitæ“ä½œ
- âœ… å¯åœ¨ä»»ä½•ç›®å½•ç‹¬ç«‹è¿è¡Œ
- âœ… è¾“å‡ºæ ‡å‡†åŒ–JSONæŠ¥å‘Š

---

## å·¥ä½œæµç¨‹ï¼ˆ6æ­¥ï¼‰

### 1. è·å–ç½‘ç«™å†…å®¹

#### æ­¥éª¤ 1ï¼šç¡®è®¤è¾“å…¥æ•°æ®æº

ç”¨æˆ·ä¼šè¾“å…¥æ•°æ®æºçš„åç§°ï¼ˆå¯èƒ½åŒ…æ‹¬ä¸­è‹±æ–‡ï¼‰ä»¥åŠæ‰€å±çš„ç±»åˆ«ï¼Œè¯†åˆ«æ•°æ®æºã€‚

**è¾“å…¥æ ¼å¼**ï¼š
- æ•°æ®æºåç§°ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰
- ç±»åˆ«ä¿¡æ¯ï¼ˆä¸»ç±»åˆ«/å­ç±»åˆ«ï¼‰

**é‡è¦**ï¼šè®°ä½ç”¨æˆ·è¾“å…¥çš„ç±»åˆ«ä¿¡æ¯ï¼Œåœ¨æ­¥éª¤5ä¿å­˜æ–‡ä»¶æ—¶ä¼šä½¿ç”¨ã€‚

#### æ­¥éª¤ 2ï¼šé‡‡ç”¨ä¸¤å±‚ç­–ç•¥è·å–é¡µé¢å†…å®¹

##### ç¬¬ä¸€å±‚ï¼šWeb Search å®šä½å®˜ç½‘

ä½¿ç”¨ `WebSearch` å·¥å…·å®šä½**è¯¥æ•°æ®æºæƒå¨çš„å®˜æ–¹ç½‘ç«™**ï¼š

- æœç´¢æ•°æ®æºçš„å®˜æ–¹ç½‘ç«™é“¾æ¥
- ç¡®è®¤ç½‘ç«™çš„æƒå¨æ€§å’Œå¯é æ€§
- è·å–ä¸»è¦é¡µé¢URL

##### ç¬¬äºŒå±‚ï¼šWebFetch æˆ– Playwright è·å–é¡µé¢å†…å®¹

æ ¹æ®ç½‘ç«™ç‰¹å¾é€‰æ‹©åˆé€‚çš„å·¥å…·è·å–é¡µé¢å†…å®¹ï¼š

**æ–¹æ¡ˆ Aï¼šWebFetch**

é€‚ç”¨äºé™æ€ç½‘é¡µæˆ–æœåŠ¡ç«¯æ¸²æŸ“çš„é¡µé¢ï¼š
- ç›´æ¥è·å–HTMLå†…å®¹
- æå–ç»„ç»‡ä¿¡æ¯ã€å…³é”® URLã€æ•°æ®è¦†ç›–èŒƒå›´ã€æ›´æ–°é¢‘ç‡ã€è®¸å¯åè®®ç­‰
- é€Ÿåº¦å¿«ï¼Œèµ„æºæ¶ˆè€—å°‘

**æ–¹æ¡ˆ Bï¼šPlaywright**

åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ Playwright æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼š
- JavaScript æ¸²æŸ“é¡µé¢ï¼ˆWebFetch è¿”å›å†…å®¹å¾ˆå°‘æˆ–ä¸ºç©ºï¼‰
- éœ€è¦ç™»å½•æˆ–è®¤è¯æ‰èƒ½æŸ¥çœ‹å†…å®¹
- å…³é”®ä¿¡æ¯åœ¨äº¤äº’å¼å…ƒç´ ä¸­ï¼ˆä¸‹æ‹‰èœå•ã€æŠ˜å é¢æ¿ã€Tabï¼‰
- ç”¨æˆ·æ˜ç¡®è¦æ±‚ä½¿ç”¨æµè§ˆå™¨

---

### 2. jsonå¡«å……

ä»ç½‘é¡µæå–ä»¥ä¸‹ä¿¡æ¯å¡«å…… JSONï¼š

**æ ¸å¿ƒå­—æ®µ**ï¼š
- **åŸºç¡€ä¿¡æ¯**: id, name (å¤šè¯­è¨€), description
- **è®¿é—®ä¿¡æ¯**: website, data_url, api_url (å¦‚æœ‰)
- **æƒå¨ç­‰çº§**: authority_level (government/international/research/market/commercial/other)
- **è¦†ç›–èŒƒå›´**: geographic_scope, country, domains, update_frequency
- **æ•°æ®å†…å®¹**: data_content åˆ—è¡¨ï¼ˆä¸­è‹±åŒè¯­ï¼‰
- **æœç´¢æ ‡ç­¾**: tags (ä¸­è‹±æ–‡å…³é”®è¯ã€åŒä¹‰è¯)

**è¯¦ç»†å­—æ®µè¯´æ˜**: è§ [datasource-schema.json](reference/datasource-schema.json)

**ä¸ç¡®å®šä¿¡æ¯çš„å¤„ç†**ï¼š
- **å¯é€‰å­—æ®µ**ï¼šå¦‚æœæ— æ³•è·å–ï¼Œç›´æ¥åˆ é™¤è¯¥å­—æ®µ
- **å…è®¸ null çš„å­—æ®µ**ï¼šå¯ä»¥è®¾ä¸º `null`
- **ä¸å…è®¸ null çš„å­—æ®µ**ï¼šå¿…é¡»æä¾›æœ‰æ•ˆå€¼æˆ–åˆ é™¤å­—æ®µ
- **å¿…å¡«å­—æ®µ**ï¼šå¿…é¡»æä¾›æœ‰æ•ˆå€¼ï¼Œå¯ä»¥å‘ç”¨æˆ·è¯¢é—®

**å‚è€ƒç¤ºä¾‹**: ç°æœ‰çš„ src/datasource-hub/sources/ ç›®å½•ä¸‹çš„JSONæ–‡ä»¶ï¼Œå¦‚æœè¦è¿›è¡Œå‚è€ƒã€‚åªä½¿ç”¨ä¸€ä¸ªç¤ºä¾‹ï¼Œé¿å…æ··æ·†ã€‚

---

### 3. ç¡®å®šæƒå¨ç­‰çº§

æ ¹æ®æ•°æ®æºçš„ç»„ç»‡ç±»å‹ç¡®å®š `authority_level` å­—æ®µå€¼ï¼š

**å¯é€‰å€¼**ï¼š
- `government` - æ”¿åºœæœºæ„ï¼ˆå›½å®¶ç»Ÿè®¡å±€ã€å¤®è¡Œã€ç›‘ç®¡æœºæ„ç­‰ï¼‰
- `international` - å›½é™…ç»„ç»‡ï¼ˆè”åˆå›½ã€ä¸–ç•Œé“¶è¡Œã€OECDç­‰ï¼‰
- `research` - ç ”ç©¶æœºæ„ï¼ˆå¤§å­¦ã€ç§‘ç ”é™¢æ‰€ã€å­¦æœ¯è”ç›Ÿç­‰ï¼‰
- `market` - å¸‚åœºæœºæ„ï¼ˆäº¤æ˜“æ‰€ã€è¡Œä¸šåä¼šã€è¯„çº§æœºæ„ç­‰ï¼‰
- `commercial` - å•†ä¸šæœºæ„ï¼ˆæ•°æ®æœåŠ¡å•†ã€å’¨è¯¢å…¬å¸ç­‰ï¼‰
- `other` - å…¶ä»–ç±»å‹

**åˆ¤æ–­åŸåˆ™**:
- æ ¹æ®ç»„ç»‡çš„å®˜æ–¹æ€§è´¨å’Œå®šä½é€‰æ‹©
- æ”¿åºœå’Œå›½é™…ç»„ç»‡å…·æœ‰æœ€é«˜æƒå¨æ€§
- å­¦æœ¯ç ”ç©¶æœºæ„æ³¨é‡æ–¹æ³•è®ºä¸¥è°¨æ€§
- å¸‚åœºå’Œå•†ä¸šæœºæ„æä¾›è¡Œä¸šä¸“ä¸šæ•°æ®
- è¯´æ˜é€‰æ‹©è¯¥ç­‰çº§çš„ä¾æ®

---

### 4. ç”Ÿæˆ JSON

- å‚è€ƒ schema æ–‡ä»¶: [datasource-schema.json](reference/datasource-schema.json)
- å¡«å……æ‰€æœ‰å¿…å¡«å­—æ®µï¼Œå°½å¯èƒ½å¡«å……å¯é€‰å­—æ®µ
- ç¡®ä¿ç¬¦åˆJSONæ ¼å¼è§„èŒƒ

---

### 5. ä¿å­˜æ–‡ä»¶

#### ç¡®å®šä¿å­˜è·¯å¾„

**ä¼˜å…ˆçº§1ï¼šä½¿ç”¨æ­¥éª¤1ä¸­è®°ä½çš„ç±»åˆ«ä¿¡æ¯**ï¼ˆæ¨èï¼‰

ä½¿ç”¨æ­¥éª¤1ä¸­ç”¨æˆ·è¾“å…¥çš„ç±»åˆ«ä¿¡æ¯ï¼ˆä¸»ç±»åˆ«/å­ç±»åˆ«ï¼‰ç›´æ¥æ„å»ºä¿å­˜è·¯å¾„ï¼š

```
src/datasource-hub/sources/{ä¸»ç±»åˆ«}/{å­ç±»åˆ«}/{æ•°æ®æºID}.json
```

ä¾‹å¦‚ï¼š
- è¾“å…¥ç±»åˆ«ï¼š`international/health`
- æ•°æ®æºIDï¼š`who-gho`
- ä¿å­˜è·¯å¾„ï¼š`src/datasource-hub/sources/international/health/who-gho.json`

**ç±»åˆ«è·¯å¾„æ˜ å°„è¡¨**ï¼ˆå‚è€ƒï¼‰ï¼š

| ä¸»ç±»åˆ« | å­ç±»åˆ«ç¤ºä¾‹ | å®Œæ•´è·¯å¾„ç¤ºä¾‹ |
|-------|----------|-------------|
| international | health, economics, trade, energy, environment | `src/datasource-hub/sources/international/{sub_cat}/` |
| countries | north-america, europe, asia, oceania, south-america, africa | `src/datasource-hub/sources/countries/{sub_cat}/` |
| academic | economics, health, environment, social, biology, physics_chemistry | `src/datasource-hub/sources/academic/{sub_cat}/` |
| sectors | energy, innovation_patents, education, agriculture_food, finance_markets | `src/datasource-hub/sources/sectors/{sub_cat}/` |
| china | national, finance, economy, etc. | `src/datasource-hub/sources/china/{sub_cat}/` |

**ä¼˜å…ˆçº§2ï¼šä½¿ç”¨ datasource-classifier Sub-Agent**ï¼ˆä»…åœ¨æ­¥éª¤1æ— ç±»åˆ«ä¿¡æ¯æ—¶ï¼‰

å¦‚æœæ­¥éª¤1ä¸­ç”¨æˆ·æœªæä¾›ç±»åˆ«ä¿¡æ¯ä¸”å¯ç”¨classifierï¼Œè°ƒç”¨ `@datasource-classifier`ï¼š

```
@datasource-classifier
è¯·åˆ†ææ­¤æ•°æ®æºå¹¶ç¡®å®šåˆ†ç±»è·¯å¾„:
- ID: {id}
- ç»„ç»‡: {organization.name} ({organization.type})
- å›½å®¶: {organization.country}
- é¢†åŸŸ: {coverage.domains}
```

#### ä¿å­˜æ“ä½œ

**ç›´æ¥è¦†ç›–æ¨¡å¼**ï¼š

- æ ¹æ®åˆ†ç±»è·¯å¾„ç›´æ¥ä¿å­˜JSONæ–‡ä»¶
- å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥è¦†ç›–ï¼ˆä¸è¿›è¡Œåˆå¹¶æˆ–å¤‡ä»½ï¼‰
- æ–‡ä»¶å‘½åï¼š`{åˆ†ç±»è·¯å¾„}/{æ•°æ®æºåç§°}.json`

**æ“ä½œæ­¥éª¤**:
1. ä½¿ç”¨æ­¥éª¤1ä¸­è®°ä½çš„ç±»åˆ«ä¿¡æ¯ç¡®å®šä¿å­˜è·¯å¾„
2. åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„
3. ç›´æ¥å†™å…¥JSONæ–‡ä»¶ï¼ˆè¦†ç›–å·²æœ‰æ–‡ä»¶ï¼‰
4. æŠ¥å‘Šä¿å­˜ä½ç½®

---

### 6. éªŒè¯ âš ï¸ å¿…é¡»æ‰§è¡Œæ‰€æœ‰ä¸‰é¡¹éªŒè¯

**ğŸ”´ é‡è¦ï¼šä»¥ä¸‹ä¸‰é¡¹éªŒè¯å¿…é¡»å…¨éƒ¨æ‰§è¡Œï¼Œä¸å¯è·³è¿‡ä»»ä½•ä¸€é¡¹ï¼**

**âš ï¸ éªŒè¯è„šæœ¬ä½ç½®**ï¼šä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä¸­çš„ `scripts/` ç›®å½•

#### 6.1 Schema éªŒè¯ âœ… å¿…é¡»

```bash
python .claude/skills/datasource-fetcher/scripts/validate.py src/datasource-hub/sources/path/to/file.json --schema .claude/skills/datasource-fetcher/reference/datasource-schema.json
```
**å¿…é¡»é€šè¿‡**ï¼šJSON æ ¼å¼ç¬¦åˆ datasource-schema.json æ ‡å‡†

#### 6.2 URL å¯è®¿é—®æ€§éªŒè¯ âœ… å¿…é¡»

```bash
python .claude/skills/datasource-fetcher/scripts/verify_urls.py src/datasource-hub/sources/path/to/file.json
```

éªŒè¯å­—æ®µï¼š`primary_url`ï¼ˆå¿…éœ€ï¼‰ã€`organization.website`ã€`api.documentation`ã€`support_url`
**å¿…é¡»é€šè¿‡**ï¼šæ‰€æœ‰ URL è¿”å› 200 çŠ¶æ€ç 

#### 6.3 å®Œæ•´æ€§æ£€æŸ¥ âœ… å¿…é¡»

```bash
python .claude/skills/datasource-fetcher/scripts/check_completeness.py src/datasource-hub/sources/path/to/file.json
```

**æœ€ä½è¦æ±‚**ï¼š
- å¿…éœ€å­—æ®µ: 100%
- æ¨èå­—æ®µ: â‰¥80%
- æ€»ä½“å®Œæˆåº¦: â‰¥70%

**è¯´æ˜**ï¼šæ‰€æœ‰éªŒè¯è„šæœ¬ä½äº `.claude/skills/datasource-fetcher/scripts/` ç›®å½•ã€‚

---

## åŒè¯­è¦æ±‚

- **ä¸­å›½æ•°æ®æº**: å¿…é¡»æä¾›ä¸­è‹±åŒè¯­ï¼ˆname, description, data_contentï¼‰
- **å›½é™…æ•°æ®æº**: è‡³å°‘æä¾›è‹±æ–‡ï¼Œå¦‚æœ‰ä¸­æ–‡ç‰ˆåˆ™è¡¥å……

---

## å…³é”®åŸåˆ™

1. **å‡†ç¡®æ€§ä¼˜å…ˆ**: å¿…é¡»å®é™…è®¿é—®ç½‘ç«™æå–ä¿¡æ¯ï¼Œä¸ç¼–é€ æ•°æ®
2. **URL å¯è®¿é—®**: æ‰€æœ‰ URL å¿…é¡»æ˜¯çœŸå®å¯è®¿é—®çš„åœ°å€
3. **æƒå¨ç­‰çº§å‡†ç¡®**: æ ¹æ®ç»„ç»‡å®é™…æ€§è´¨ç¡®å®š authority_levelï¼Œæœ‰ä¾æ®
4. **è°¨æ…å¤„ç†**: ä¸ç¡®å®šçš„ä¿¡æ¯æ ‡è®°ä¸º null æˆ–å‘ç”¨æˆ·è¯¢é—®
5. **ä¸åšé¢å¤–æ“ä½œ**:
   - âŒ ä¸æ›´æ–°æ–‡æ¡£
   - âŒ ä¸æäº¤Git
   - âŒ ä¸ç”Ÿæˆç´¢å¼•
   - âœ… åªç”Ÿæˆå’ŒéªŒè¯JSONæ–‡ä»¶

---

## ä¸å®Œæ•´æµç¨‹çš„å…³ç³»

```
å®Œæ•´æ•°æ®æºå¤„ç†æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ datasource-fetcher (æœ¬skill)        â”‚ â† æ­¥éª¤ 1-6
â”‚ - è·å–æ•°æ®                          â”‚
â”‚ - ç”ŸæˆJSON                          â”‚
â”‚ - éªŒè¯                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ (JSONæ–‡ä»¶)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ datasource-publisher (å¦ä¸€ä¸ªskill)  â”‚ â† æ­¥éª¤ 7-10
â”‚ - ç”Ÿæˆç´¢å¼•                          â”‚
â”‚ - æ›´æ–°æ–‡æ¡£                          â”‚
â”‚ - Gitæäº¤                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Reference æ–‡æ¡£

- [datasource-schema.json](reference/datasource-schema.json) - JSON Schema æ ‡å‡†

---

**æ³¨æ„**: æœ¬ skill ä¸“æ³¨äºæ•°æ®è·å–å’ŒéªŒè¯ï¼Œä¸æ¶‰åŠæ–‡æ¡£ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ã€‚
